---
import type { AdiosStat } from "../../@types/member";
import AdiosChart from "../Adios/AdiosChart";
const getAdiosCountByUser = async () => {
    const res = await fetch(`${import.meta.env.PUBLIC_API_URL}/messages/count-by-author`);
    const data = await res.json();
    return data;
};

const rawData = await getAdiosCountByUser();

const adiosData = Object.entries(rawData).map(([author, count]) => ({
  author,
  count: Number(count),
}));
---

<div class="p-4 md:p-6 flex flex-col items-center justify-center space-y-6">
    <h1 class="text-5xl font-bold">Statistics</h1>
    <p class="text-lg">Realtime Statistic for those who contribute to Adios</p>
    <AdiosChart data={adiosData} client:load/>
</div>