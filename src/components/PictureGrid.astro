---
// Fetch the JSON data from an API endpoint

const response = await fetch(`${import.meta.env.PUBLIC_API_URL}/messages/images?page=1&limit=20`);
const data = await response.json();

// Extract the imageUrl from the JSON data
const images = data.map((item: any) => ({
  src: item.imageUrl,
  alt: item.title,
}));
---

<div class="masonry-grid">
  {images.map((image: any) => (
    <div class="masonry-item">
      <img src={image.src} alt={image.alt} class="w-full h-auto rounded-xl"/>
    </div>
  ))}
</div>

<style>

.masonry-grid {
  column-count: 4;
  column-gap: 1rem;
}

.masonry-item {
  break-inside: avoid;
  margin-bottom: 1rem;
}

@media (max-width: 768px) {
  .masonry-grid {
    column-count: 2;
  }
}

@media (max-width: 500px) {
  .masonry-grid {
    column-count: 1;
  }
}
</style>